{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport { useEffect } from \"react\";\nimport Layout from \"../components/Layout\";\nimport Header from \"../components/Header/Header\";\nimport Footer from \"../components/Footer/Footer\";\nimport { useStoreActions } from \"easy-peasy\";\nimport { useIsMount } from \"../utils/useIsMount\";\nimport { convertRegion } from \"../utils/stateNameAbbreviation\";\nimport Weather from \"../components/Weather/Weather\";\nimport { fetchWeather, ipInfo, ipData } from \"../api/APIUtils\";\n\nconst index = () => {\n  const setWeather = useStoreActions(actions => actions.weather.setWeatherData);\n  const setLatitude = useStoreActions(actions => actions.location.setLocationLatitude);\n  const setLongitude = useStoreActions(actions => actions.location.setLocationLongitude);\n  const setCity = useStoreActions(actions => actions.location.setLocationCity);\n  const setRegion = useStoreActions(actions => actions.location.setLocationRegion);\n  const setSpinner = useStoreActions(actions => actions.spinner.setSpinner);\n  const isMount = useIsMount();\n  useEffect(() => {\n    setSpinner(true);\n\n    if (isMount) {\n      const publicIp = require(\"public-ip\");\n\n      publicIp.v4().then(results => {\n        ipInfo(results).then(res => {\n          const latLng = res.loc.split(\",\");\n          const lat = latLng[0];\n          const lng = latLng[1];\n          setRegion(convertRegion(res.region));\n          setCity(res.city);\n          setLatitude(lat);\n          setLongitude(lng);\n          fetchWeather(lat, lng).then(results => {\n            setWeather(results);\n            setSpinner(false);\n          });\n        }).catch(err => {\n          console.error(err);\n          ipData(results).then(res => {\n            const lat = res.latitude;\n            const lng = res.longitude;\n            setRegion(convertRegion(res.region));\n            setCity(res.city);\n            setLatitude(lat);\n            setLongitude(lng);\n            fetchWeather(lat, lng).then(results => {\n              setWeather(results);\n              setSpinner(false);\n            });\n          }).catch(err => {\n            console.error(err);\n          });\n        });\n      });\n    }\n  }, []);\n  return __jsx(React.Fragment, null, __jsx(Layout, {\n    title: \"Weather App\"\n  }, __jsx(Header, null), __jsx(Weather, null), __jsx(Footer, null)));\n};\n\nexport default index;","map":{"version":3,"names":["useEffect","Layout","Header","Footer","useStoreActions","useIsMount","convertRegion","Weather","fetchWeather","ipInfo","ipData","index","setWeather","actions","weather","setWeatherData","setLatitude","location","setLocationLatitude","setLongitude","setLocationLongitude","setCity","setLocationCity","setRegion","setLocationRegion","setSpinner","spinner","isMount","publicIp","require","v4","then","results","res","latLng","loc","split","lat","lng","region","city","catch","err","console","error","latitude","longitude"],"sources":["C:/Users/bentexstudiosio/Internship/cyweather/pages/index.js"],"sourcesContent":["import { useEffect } from \"react\";\r\nimport Layout from \"../components/Layout\";\r\nimport Header from \"../components/Header/Header\";\r\nimport Footer from \"../components/Footer/Footer\";\r\nimport { useStoreActions } from \"easy-peasy\";\r\nimport { useIsMount } from \"../utils/useIsMount\";\r\nimport { convertRegion } from \"../utils/stateNameAbbreviation\";\r\nimport Weather from \"../components/Weather/Weather\";\r\nimport { fetchWeather, ipInfo, ipData } from \"../api/APIUtils\";\r\n\r\nconst index = () => {\r\n  const setWeather = useStoreActions(actions => actions.weather.setWeatherData);\r\n  const setLatitude = useStoreActions(actions => actions.location.setLocationLatitude);\r\n  const setLongitude = useStoreActions(actions => actions.location.setLocationLongitude);\r\n  const setCity = useStoreActions(actions => actions.location.setLocationCity);\r\n  const setRegion = useStoreActions(actions => actions.location.setLocationRegion);\r\n  const setSpinner = useStoreActions(actions => actions.spinner.setSpinner);\r\n  const isMount = useIsMount();\r\n\r\n  useEffect(() => {\r\n    setSpinner(true);\r\n    if (isMount) {\r\n      const publicIp = require(\"public-ip\");\r\n      publicIp.v4().then(results => {\r\n        ipInfo(results)\r\n          .then(res => {\r\n            const latLng = res.loc.split(\",\");\r\n            const lat = latLng[0];\r\n            const lng = latLng[1];\r\n            setRegion(convertRegion(res.region));\r\n            setCity(res.city);\r\n            setLatitude(lat);\r\n            setLongitude(lng);\r\n            fetchWeather(lat, lng).then(results => {\r\n              setWeather(results);\r\n              setSpinner(false);\r\n            });\r\n          })\r\n          .catch(err => {\r\n            console.error(err);\r\n            ipData(results)\r\n              .then(res => {\r\n                const lat = res.latitude;\r\n                const lng = res.longitude;\r\n                setRegion(convertRegion(res.region));\r\n                setCity(res.city);\r\n                setLatitude(lat);\r\n                setLongitude(lng);\r\n                fetchWeather(lat, lng).then(results => {\r\n                  setWeather(results);\r\n                  setSpinner(false);\r\n                });\r\n              })\r\n              .catch(err => {\r\n                console.error(err);\r\n              });\r\n          });\r\n      });\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <Layout title=\"Weather App\">\r\n        <Header />\r\n        <Weather />\r\n        <Footer />\r\n      </Layout>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default index;"],"mappings":"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"},"metadata":{},"sourceType":"module"}