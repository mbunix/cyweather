{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useEffect } from \"react\";\nimport Layout from \"../components/Layout\";\nimport Header from \"../components/Header/Header\";\nimport Footer from \"../components/Footer/Footer\";\nimport { useStoreActions } from \"easy-peasy\";\nimport { useIsMount } from \"../utils/useIsMount\";\nimport { convertRegion } from \"../utils/stateNameAbbreviation\";\nimport Weather from \"../components/Weather/Weather\";\nimport { fetchWeather, ipInfo, ipData } from \"../api/APIUtils\";\n\nvar index = function index() {\n  _s();\n\n  var setWeather = useStoreActions(function (actions) {\n    return actions.weather.setWeatherData;\n  });\n  var setLatitude = useStoreActions(function (actions) {\n    return actions.location.setLocationLatitude;\n  });\n  var setLongitude = useStoreActions(function (actions) {\n    return actions.location.setLocationLongitude;\n  });\n  var setCity = useStoreActions(function (actions) {\n    return actions.location.setLocationCity;\n  });\n  var setRegion = useStoreActions(function (actions) {\n    return actions.location.setLocationRegion;\n  });\n  var setSpinner = useStoreActions(function (actions) {\n    return actions.spinner.setSpinner;\n  });\n  var isMount = useIsMount();\n  useEffect(function () {\n    setSpinner(true);\n\n    if (isMount) {\n      var publicIp = require(\"public-ip\");\n\n      publicIp.v4().then(function (results) {\n        ipInfo(results).then(function (res) {\n          var latLng = res.loc.split(\",\");\n          var lat = latLng[0];\n          var lng = latLng[1];\n          setRegion(convertRegion(res.region));\n          setCity(res.city);\n          setLatitude(lat);\n          setLongitude(lng);\n          fetchWeather(lat, lng).then(function (results) {\n            setWeather(results);\n            setSpinner(false);\n          });\n        })[\"catch\"](function (err) {\n          console.error(err);\n          ipData(results).then(function (res) {\n            var lat = res.latitude;\n            var lng = res.longitude;\n            setRegion(convertRegion(res.region));\n            setCity(res.city);\n            setLatitude(lat);\n            setLongitude(lng);\n            fetchWeather(lat, lng).then(function (results) {\n              setWeather(results);\n              setSpinner(false);\n            });\n          })[\"catch\"](function (err) {\n            console.error(err);\n          });\n        });\n      });\n    }\n  }, []);\n  return __jsx(React.Fragment, null, __jsx(Layout, {\n    title: \"Weather App\"\n  }, __jsx(Header, null), __jsx(Weather, null), __jsx(Footer, null)));\n};\n\n_s(index, \"Gu2DlUEzB/8DXSgg6bQS7o8d6Go=\", false, function () {\n  return [useStoreActions, useStoreActions, useStoreActions, useStoreActions, useStoreActions, useStoreActions, useIsMount];\n});\n\nexport default index;","map":{"version":3,"names":["useEffect","Layout","Header","Footer","useStoreActions","useIsMount","convertRegion","Weather","fetchWeather","ipInfo","ipData","index","setWeather","actions","weather","setWeatherData","setLatitude","location","setLocationLatitude","setLongitude","setLocationLongitude","setCity","setLocationCity","setRegion","setLocationRegion","setSpinner","spinner","isMount","publicIp","require","v4","then","results","res","latLng","loc","split","lat","lng","region","city","err","console","error","latitude","longitude"],"sources":["C:/Users/bentexstudiosio/Internship/cyweather/pages/index.js"],"sourcesContent":["import { useEffect } from \"react\";\r\nimport Layout from \"../components/Layout\";\r\nimport Header from \"../components/Header/Header\";\r\nimport Footer from \"../components/Footer/Footer\";\r\nimport { useStoreActions } from \"easy-peasy\";\r\nimport { useIsMount } from \"../utils/useIsMount\";\r\nimport { convertRegion } from \"../utils/stateNameAbbreviation\";\r\nimport Weather from \"../components/Weather/Weather\";\r\nimport { fetchWeather, ipInfo, ipData } from \"../api/APIUtils\";\r\n\r\nconst index = () => {\r\n  const setWeather = useStoreActions(actions => actions.weather.setWeatherData);\r\n  const setLatitude = useStoreActions(actions => actions.location.setLocationLatitude);\r\n  const setLongitude = useStoreActions(actions => actions.location.setLocationLongitude);\r\n  const setCity = useStoreActions(actions => actions.location.setLocationCity);\r\n  const setRegion = useStoreActions(actions => actions.location.setLocationRegion);\r\n  const setSpinner = useStoreActions(actions => actions.spinner.setSpinner);\r\n  const isMount = useIsMount();\r\n\r\n  useEffect(() => {\r\n    setSpinner(true);\r\n    if (isMount) {\r\n      const publicIp = require(\"public-ip\");\r\n      publicIp.v4().then(results => {\r\n        ipInfo(results)\r\n          .then(res => {\r\n            const latLng = res.loc.split(\",\");\r\n            const lat = latLng[0];\r\n            const lng = latLng[1];\r\n            setRegion(convertRegion(res.region));\r\n            setCity(res.city);\r\n            setLatitude(lat);\r\n            setLongitude(lng);\r\n            fetchWeather(lat, lng).then(results => {\r\n              setWeather(results);\r\n              setSpinner(false);\r\n            });\r\n          })\r\n          .catch(err => {\r\n            console.error(err);\r\n            ipData(results)\r\n              .then(res => {\r\n                const lat = res.latitude;\r\n                const lng = res.longitude;\r\n                setRegion(convertRegion(res.region));\r\n                setCity(res.city);\r\n                setLatitude(lat);\r\n                setLongitude(lng);\r\n                fetchWeather(lat, lng).then(results => {\r\n                  setWeather(results);\r\n                  setSpinner(false);\r\n                });\r\n              })\r\n              .catch(err => {\r\n                console.error(err);\r\n              });\r\n          });\r\n      });\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <Layout title=\"Weather App\">\r\n        <Header />\r\n        <Weather />\r\n        <Footer />\r\n      </Layout>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default index;"],"mappings":"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"},"metadata":{},"sourceType":"module"}